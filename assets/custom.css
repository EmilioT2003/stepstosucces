/* =========================================================
   Variables globales: Ampliadas para máxima flexibilidad
   ========================================================= */
:root{
  --txt:#111;
  --muted:#6b7280;
  --bg:#fff;
  --card:#f8fafc;
  --border:#e5e7eb;

  --accent:#2563eb;
  --accent-hover:#1d4ed8;
  --danger:#dc2626;
  --success:#22c55e;
  --warn:#eab308;

  --radius:16px;
  --radius-sm:10px;
  --shadow-xs:0 0.5px 1.5px rgba(0,0,0,0.04);
  --shadow-sm:0 1px 3px rgba(0,0,0,0.08);
  --shadow-md:0 3px 6px rgba(0,0,0,0.12);
  --shadow-lg:0 8px 20px rgba(0,0,0,0.16);

  /* Tipografía variable */
  --font-main:'InterVariable',Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  --font-serif:'Playfair Display',serif;
  --font-mono:'JetBrains Mono',Menlo,Consolas,monospace;

  /* Accesibilidad */
  --focus-ring:0 0 0 3px rgba(37,99,235,0.45);
  --outline-width:2px;
  --outline-color:#818cf8;
}

/* =========================================================
   Reset avanzado y motion
   ========================================================= */
*,
*::before,
*::after{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0;
  background:var(--bg);
  color:var(--txt);
  font-family:var(--font-main);
  line-height:1.6;
  font-size:16px;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition:background .3s,color .3s;
}
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {transition:none!important;animation:none!important}
}

/* =========================================================
   Diseño responsivo avanzado
   ========================================================= */
.wrap{
  max-width:1180px;
  margin:0 auto;
  padding:32px 24px;
}
.grid{
  display:grid;
  gap:32px;
  grid-template-columns:1.6fr 1fr;
}
@media(max-width:950px){
  .grid{grid-template-columns:1fr;gap:20px}
  .wrap{padding:20px 8px}
}

/* =========================================================
   Topbar con glassmorphism y animaciones
   ========================================================= */
.topbar{
  border-bottom:1px solid var(--border);
  background:rgba(255,255,255,0.88);
  backdrop-filter:blur(6px) saturate(1.2);
  position:sticky;top:0;z-index:100;
  box-shadow:0 2px 8px rgba(0,0,0,0.04);
  animation:slideDown .7s cubic-bezier(.77,0,.18,1) 1;
}
@keyframes slideDown{
  from {transform:translateY(-32px);opacity:0}
  to {transform:translateY(0);opacity:1}
}
.topbar .wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.brand{
  font-weight:800;
  text-decoration:none;
  color:var(--txt);
  font-size:24px;
  letter-spacing:-.5px;
  font-family:var(--font-serif);
  transition:color .2s;
}
.brand:hover{color:var(--accent)}
.nav a{
  margin-left:12px;
  padding:7px 18px;
  border:1.5px solid var(--border);
  border-radius:var(--radius-sm);
  text-decoration:none;
  color:var(--txt);
  font-size:15px;
  font-weight:500;
  background:rgba(255,255,255,.7);
  transition:all .18s cubic-bezier(.42,0,.58,1);
  outline:none;
}
.nav a:focus-visible{
  box-shadow:var(--focus-ring);
  border-color:var(--outline-color);
}
.nav a:hover,
.nav a.active{
  background:var(--accent);
  border-color:var(--accent);
  color:#fff;
}

/* =========================================================
   Hero / Headings con gradientes y animaciones
   ========================================================= */
.hero{
  font-family:var(--font-serif);
  font-size:44px;
  line-height:1.08;
  margin:22px 0 10px;
  background:linear-gradient(90deg,#2563eb 20%,#1d4ed8 65%,#818cf8 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:fadeInHero 1.2s cubic-bezier(.52,.04,.25,1.04) 1;
}
@keyframes fadeInHero{
  from{opacity:0;transform:translateY(22px)}
  to{opacity:1;transform:translateY(0)}
}
@media(max-width:900px){
  .hero{font-size:30px}
}
h2{font-size:26px;margin-bottom:14px;font-weight:700;font-family:var(--font-serif);}
h3{font-size:20px;font-weight:600;margin-top:1.7em;font-family:var(--font-main);}

/* =========================================================
   Cards / Containers con efecto hover y 3D
   ========================================================= */
.card{
  background:var(--card);
  border:1.5px solid var(--border);
  border-radius:var(--radius);
  padding:22px 20px;
  box-shadow:var(--shadow-xs);
  transition:box-shadow .18s,transform .16s;
  position:relative;
  will-change:box-shadow,transform;
  overflow:visible;
}
.card:hover{
  box-shadow:0 8px 24px 0 rgba(37,99,235,0.10), var(--shadow-lg);
  transform:translateY(-2px) scale(1.012);
  z-index:10;
}

/* =========================================================
   Prose / Content
   ========================================================= */
.prose{
  font-size:18px;
  line-height:1.8;
  margin:18px 0;
  color:var(--txt);
  max-width:700px;
}
.prose h2,
.prose h3{
  margin-top:1.5em;
  margin-bottom:.5em;
  font-family:var(--font-serif);
  line-height:1.3;
}
.prose p{margin:.7em 0}
.prose ul,
.prose ol{margin:.7em 0 0.7em 1.5em}
.prose a{
  text-decoration:underline;
  color:var(--accent);
  font-weight:500;
  transition:color .18s;
  word-break:break-all;
}
.prose a:hover{color:var(--accent-hover)}
.prose blockquote{
  border-left:4px solid var(--accent);
  padding-left:16px;
  margin:.9em 0;
  color:var(--muted);
  font-style:italic;
  background:rgba(37,99,235,0.03);
  border-radius:6px;
}
.prose code, code{
  background:#f3f4f6;
  padding:2px 6px;
  border-radius:5px;
  font-family:var(--font-mono);
  font-size:14px;
  color:#be185d;
}
.prose pre{
  background:#111827;
  color:#f3f4f6;
  border-radius:10px;
  padding:18px;
  overflow-x:auto;
  font-size:15px;
  font-family:var(--font-mono);
  margin:1em 0;
}

/* =========================================================
   Listados / Rank / Casos con badges dinámicos
   ========================================================= */
.rank{
  display:flex;
  flex-direction:column;
  gap:14px;
}
.rank-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:linear-gradient(90deg,#fff 60%,#f0f5ff 100%);
  border:1.5px solid var(--border);
  border-radius:var(--radius);
  padding:14px;
  transition:transform .16s, box-shadow .16s;
  box-shadow:var(--shadow-xs);
}
.rank-item:hover{
  transform:translateY(-3px) scale(1.012);
  box-shadow:0 8px 28px 0 rgba(37,99,235,0.07), var(--shadow-md);
}
.rank-item .medal{font-size:22px;}
.pill{
  font-size:13px;
  border-radius:999px;
  border:1px solid var(--border);
  padding:3px 13px;
  background:#fff;
  color:var(--txt);
  font-weight:500;
  letter-spacing:.03em;
}

.cases-list{
  list-style:none;
  display:grid;
  gap:12px;
}
.case-item a{
  display:flex;
  gap:14px;
  align-items:center;
  justify-content:space-between;
  text-decoration:none;
  color:var(--txt);
  background:linear-gradient(90deg,#fff 70%,#f3f9ff 100%);
  border:1.5px solid var(--border);
  border-radius:var(--radius);
  padding:13px 16px;
  transition:transform .15s, box-shadow .15s;
}
.case-item a:hover{
  transform:translateY(-3px) scale(1.012);
  box-shadow:0 8px 24px 0 rgba(37,99,235,0.10), var(--shadow-md);
}
.case-item .title{font-weight:600}
.case-item .flag{font-size:22px}

/* =========================================================
   Chips, Specs, Breadcrumbs mejorados
   ========================================================= */
.chiprow{display:flex;flex-wrap:wrap;gap:10px}
.chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:7px 12px;
  border:1.5px solid var(--border);
  background:#fff;
  border-radius:999px;
  font-size:15px;
  font-weight:500;
  box-shadow:0 1px 2px rgba(0,0,0,0.02);
  color:var(--txt);
}
.chip.emphasis{background:#fff7ed;border-color:#fed7aa;color:#c2410c}
.chip.success{background:#ecfdf5;border-color:#22c55e;color:#15803d}
.chip.danger{background:#fef2f2;border-color:#dc2626;color:#b91c1c}
.chip.info{background:#eff6ff;border-color:#2563eb;color:#2563eb}

.specs{
  display:grid;
  grid-template-columns:170px 1fr;
  gap:10px 24px;
  font-size:16px;
}
.specs dt{font-weight:600;opacity:.93;}
.specs dd{margin:0}

.breadcrumbs{margin:10px 0 14px;color:var(--muted);font-size:15px}
.breadcrumbs a{text-decoration:none;color:var(--accent);}
.breadcrumbs a:hover{text-decoration:underline}

.backrow{display:flex;align-items:center;gap:14px;margin-top:14px}
.backrow .spacer{flex:1}

/* =========================================================
   Map mejorado
   ========================================================= */
.map{height:400px;border-radius:14px;overflow:hidden;box-shadow:0 2px 16px rgba(37,99,235,0.08);}
.leaflet-container{font:inherit}

/* =========================================================
   Footer evolutivo
   ========================================================= */
.footer{
  border-top:1.5px solid var(--border);
  margin-top:36px;
  padding:24px;
  text-align:center;
  color:var(--muted);
  font-size:15px;
  background:rgba(255,255,255,0.75);
  animation:fadeInFooter 1.5s .5s both;
}
@keyframes fadeInFooter{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

/* =========================================================
   Accesibilidad / SR-only / Focus / Contrast
   ========================================================= */
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;
  overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0
}
.sr-only.focusable:focus{
  position:static;width:auto;height:auto;margin:0;
  clip:auto;padding:8px 16px;background:#fde68a;color:#111;
  border-radius:8px;z-index:1000
}
:focus-visible{
  outline:var(--outline-width) solid var(--outline-color);
  outline-offset:2px;
}

/* Altos contrastes para accesibilidad */
@media (prefers-contrast: more) {
  :root{
    --border:#000;
    --card:#fff;
    --bg:#fff;
    --txt:#000;
  }
  .card, .case-item a, .chip, .footer, .specs, .rank-item{
    background:#fff!important;
    color:#000!important;
    border-color:#000!important;
  }
}

/* =========================================================
   Tooltips y microinteracción avanzada
   ========================================================= */
[data-tooltip]{
  position:relative;
  cursor:pointer;
}
[data-tooltip]:hover::after,
[data-tooltip]:focus::after{
  content:attr(data-tooltip);
  position:absolute;
  left:50%;top:calc(100% + 8px);
  transform:translateX(-50%);
  background:var(--txt);
  color:#fff;
  padding:6px 12px;
  border-radius:7px;
  white-space:pre;
  font-size:14px;
  z-index:99;
  min-width:64px;
  box-shadow:0 3px 14px rgba(0,0,0,0.18);
  animation:fadeInTooltip .24s cubic-bezier(.77,0,.18,1);
}
@keyframes fadeInTooltip{from{opacity:0;transform:translateX(-50%) translateY(8px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

/* =========================================================
   Motion y microtransiciones para sensación premium
   ========================================================= */
.card, .case-item a, .rank-item, .chip, .nav a, .footer, .brand, .prose a{
  transition:background .23s cubic-bezier(.55,0,.1,1),color .22s,box-shadow .17s,transform .21s;
}

/* =========================================================
   Dark mode avanzado
   ========================================================= */
@media(prefers-color-scheme: dark){
  :root{
    --txt:#e5e7eb;
    --muted:#9ca3af;
    --bg:#0b0f14;
    --card:#181f2a;
    --border:#22293a;
    --accent:#3b82f6;
    --accent-hover:#2563eb;
    --danger:#ef4444;
    --success:#22d3ee;
    --warn:#eab308;
    --focus-ring:0 0 0 3px rgba(59,130,246,0.35);
    --outline-color:#818cf8;
  }
  body{background:var(--bg);color:var(--txt);}
  .card, .case-item a, .chip, .footer, .specs, .rank-item{
    background:var(--card)!important;
    color:var(--txt)!important;
    border-color:var(--border)!important;
  }
  .nav a,.brand{color:var(--txt)}
  .nav a.active{background:var(--accent);color:#fff}
  .prose code, code{background:#23283a;color:#fca5a5;}
  .prose pre{background:#181f2a;color:#dbeafe;}
  .prose blockquote{background:rgba(59,130,246,0.07);}
}
